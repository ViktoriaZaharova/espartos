if (self.CavalryLogger) { CavalryLogger.start_js(["Qg2MK"]); }

__d("MNCommerceLogger",["BanzaiLogger","BanzaiODS"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("BanzaiLogger").create({signal:!0});function h(a){switch(a){case"devx_upsell_learn_more_clicked":return"devx.upsell.learn_more.clicked";default:return a}}a={logClick:function(a,c,d){b("BanzaiODS").bumpEntityKey(2966,"messenger_commerce",h(a)),g.log("MessengerCommerceLoggerConfig",{brand_app_id:c,user_fbid:d,event:a})},logAuthEvent:function(a,c,d,e){g.log("MessengerCommerceLoggerConfig",{brand_app_id:a,page_id:c,user_fbid:d,event:e}),b("BanzaiODS").bumpEntityKey(2966,"messenger_commerce","auth."+e+".all")}};e.exports=a}),null);
__d("PluginMessengerMessageUs",["Event","MNCommerceLogger"],(function(a,b,c,d,e,f){"use strict";a={setupMessageUsLogging:function(a,c,d,e){b("Event").listen(a,"click",function(){b("MNCommerceLogger").logAuthEvent(c,d,e,"message_us_clicked")})}};e.exports=a}),null);
__d("XMNSendToMessengerContinueAsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/messenger_platform/send_to_messenger/",{next:{type:"String",required:!0},page_id:{type:"String",required:!0},app_id:{type:"String",required:!0},ref:{type:"String"},switch_user:{type:"String"},is_inapp_browser:{type:"Bool",defaultValue:!1}})}),null);
__d("PluginSendToMessenger",["Arbiter","CSS","DOMEvent","DOMEventListener","FormSubmit","MNCommerceLogger","Plugin","PluginDOMEventListener","PluginMessage","PluginOptin","PluginResize","PopupWindow","UnverifiedXD","URI","XMNSendToMessengerContinueAsController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=13;a=function(){__p&&__p();function a(a,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();var v=this;this.$1=!1;b("PluginResize").auto(r);(!f||j&&!k)&&b("CSS").hide(e);k=function(a,c){return b("PluginDOMEventListener").add(a,"click",function(a){m==="0"&&t&&location.reload(),c(a)})};e=function(a){return b("DOMEventListener").add(a,"keydown",function(b){b.keyCode===g&&a.click()})};u=t&&u;if(f){var w=new(b("URI"))(window.location.search).getQueryData();w.reload==="reload"&&(this.$1=!0,w.id===l&&(b("CSS").show(c),b("CSS").hide(a)));w.act==="send"&&!u&&(b("CSS").show(c),b("CSS").hide(a),h&&this.submit(r));u&&(this.submit(r),b("CSS").show(c),b("CSS").hide(a))}w=function(d){__p&&__p();b("MNCommerceLogger").logAuthEvent(o,n,m,"send_to_messenger_clicked");b("UnverifiedXD").send({type:"sdk_event",event:"send_to_messenger",data:JSON.stringify({event:"clicked",ref:p})});if(j||!q&&!v.$1){new(b("DOMEvent"))(d).kill();if(!i)new(b("PluginOptin"))("send_to_messenger").addLoginParams({logged_in:f,switch_user:j,page_id:n,app_id:o,ref:p,connected:!1,is_inapp_browser:!1,show_subtitle:!0}).addReturnParams({act:"send"}).start();else if(s!=null){d=b("XMNSendToMessengerContinueAsController").getURIBuilder().setString("next",s.toString()).setString("page_id",n).setString("app_id",o).setString("ref",p).setBool("is_inapp_browser",!0).getURI();b("PopupWindow").open(d.toString(),420,450)}}else b("MNCommerceLogger").logAuthEvent(o,n,m,"send_to_messenger_opt_in_client_event"),v.submit(r),b("CSS").show(c),b("CSS").hide(a),b("UnverifiedXD").send({type:"sdk_event",event:"send_to_messenger",data:JSON.stringify({event:"opt_in",ref:p})})};h=function(a){b("UnverifiedXD").send({type:"sdk_event",event:"send_to_messenger",data:JSON.stringify({event:"not_you",ref:p})}),new(b("PluginOptin"))("send_to_messenger").addLoginParams({logged_in:!1,switch_user:!0,page_id:n,app_id:o,ref:p,connected:q,is_inapp_browser:i,show_subtitle:!0}).addReturnParams({act:"send"}).start(),b("PluginMessage").listen()};k(a,w);e(a);d!=null&&(k(d,h),e(d));u=function(d,e){e.identifier===l&&(b("CSS").show(c),b("CSS").hide(a))};b("Arbiter").subscribe(b("Plugin").CONNECT,u)}var c=a.prototype;c.submit=function(a){b("FormSubmit").send(a)};return a}();e.exports=a}),null);